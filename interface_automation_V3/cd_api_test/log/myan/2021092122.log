2021-09-21 22:59:05,591 api_test.py[line:162]INFO - ########start to run API automation#######
2021-09-21 22:59:05,592 api_test.py[line:163]INFO - *****runAllCase
2021-09-21 22:59:05,592 api_test.py[line:85]INFO - *****deleteResultByProject
2021-09-21 22:59:05,631 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-09-21 22:59:05,646 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `myan_testcases` where project='myan' and run='yes'
2021-09-21 22:59:05,649 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'myan', 'module': 'Login', 'title': 'app login', 'method': 'post', 'url': '/myan/api/v1.0/user/login', 'run': 'yes', 'headers': '{}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"account":"doqwmz09573@chacuo.net","password":"Kv6O4Sv9"}', 'expect_result': '0', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': 'Doris'}, {'id': 2, 'project': 'myan', 'module': 'Wallet', 'title': 'wallet info', 'method': 'get', 'url': '/myan/api/v1.0/wallet/info', 'run': 'yes', 'headers': '{"token":"$token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"token","scope":"header"}]', 'request_body': '{}', 'expect_result': '0', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': 'Doris'}]
2021-09-21 22:59:05,650 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-09-21 22:59:05,651 api_test.py[line:190]INFO - *****runCase
2021-09-21 22:59:05,651 api_test.py[line:191]INFO - #####start to run case id: 1
2021-09-21 22:59:05,651 api_test.py[line:254]INFO - case id = 1
req_url =  https://platform.htilarpay.com/myan/api/v1.0/user/login
 method = post
 header = {}
 param ={'account': 'doqwmz09573@chacuo.net', 'password': 'Kv6O4Sv9'}
2021-09-21 22:59:06,924 api_test.py[line:261]INFO - response = ↓
2021-09-21 22:59:06,924 api_test.py[line:262]INFO - {'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': 'eda2ae7a839c4697be3ac54ffa054f12', 'token_expire': '2021-10-21 22:59:06', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236346922}
2021-09-21 22:59:06,924 api_test.py[line:263]INFO - #####end to run case id: 1
2021-09-21 22:59:06,925 api_test.py[line:273]INFO - *****assertResponse
2021-09-21 22:59:06,925 api_test.py[line:285]INFO - 测试用例通过
2021-09-21 22:59:06,925 api_test.py[line:144]INFO - assert_msg:{'is_pass': True, 'msg': 'module:Login,title:app login,assert_type:code,message:success'}
2021-09-21 22:59:06,925 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-09-21 22:59:06,949 api_test.py[line:76]INFO - update `myan_testcases` set response="{'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': 'eda2ae7a839c4697be3ac54ffa054f12', 'token_expire': '2021-10-21 22:59:06', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236346922}", pass='Pass', msg='module:Login,title:app login,assert_type:code,message:success', update_time='2021-09-21 22:59:06' where id=1
2021-09-21 22:59:06,953 api_test.py[line:149]INFO - 更新结果 rows=1
2021-09-21 22:59:06,954 api_test.py[line:190]INFO - *****runCase
2021-09-21 22:59:06,954 api_test.py[line:191]INFO - #####start to run case id: 2
2021-09-21 22:59:06,954 api_test.py[line:224]INFO - 有前置条件
2021-09-21 22:59:06,954 api_test.py[line:40]INFO - *****findCaseById
2021-09-21 22:59:06,979 api_test.py[line:190]INFO - *****runCase
2021-09-21 22:59:06,980 api_test.py[line:191]INFO - #####start to run case id: 1
2021-09-21 22:59:06,980 api_test.py[line:254]INFO - case id = 1
req_url =  https://platform.htilarpay.com/myan/api/v1.0/user/login
 method = post
 header = {}
 param ={'account': 'doqwmz09573@chacuo.net', 'password': 'Kv6O4Sv9'}
2021-09-21 22:59:07,837 api_test.py[line:261]INFO - response = ↓
2021-09-21 22:59:07,837 api_test.py[line:262]INFO - {'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': 'b6a17baaba33408e886fb4fd6d5ee53a', 'token_expire': '2021-10-21 22:59:07', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236347853}
2021-09-21 22:59:07,837 api_test.py[line:263]INFO - #####end to run case id: 1
2021-09-21 22:59:07,838 api_test.py[line:273]INFO - *****assertResponse
2021-09-21 22:59:07,838 api_test.py[line:285]INFO - 测试用例通过
2021-09-21 22:59:07,838 api_test.py[line:234]INFO - 前置条件通过
2021-09-21 22:59:07,838 api_test.py[line:243]INFO - {'field': 'token', 'scope': 'header'}
2021-09-21 22:59:07,838 api_test.py[line:251]INFO - field_value:b6a17baaba33408e886fb4fd6d5ee53a
2021-09-21 22:59:07,838 api_test.py[line:254]INFO - case id = 2
req_url =  https://platform.htilarpay.com/myan/api/v1.0/wallet/info
 method = get
 header = {'token': 'b6a17baaba33408e886fb4fd6d5ee53a'}
 param ={}
2021-09-21 22:59:08,768 api_test.py[line:261]INFO - response = ↓
2021-09-21 22:59:08,768 api_test.py[line:262]INFO - {'code': 0, 'msg': 'success', 'data': {'create_time': '2021-09-05T19:42:29+08:00', 'max_balance_limit': '4294967295', 'max_withdraw_limit': '4294967295', 'total_balance': '999900', 'useable_balance': '999900', 'wallet_sn': 40}, 'time': 1632236348699}
2021-09-21 22:59:08,768 api_test.py[line:263]INFO - #####end to run case id: 2
2021-09-21 22:59:08,768 api_test.py[line:273]INFO - *****assertResponse
2021-09-21 22:59:08,769 api_test.py[line:285]INFO - 测试用例通过
2021-09-21 22:59:08,769 api_test.py[line:144]INFO - assert_msg:{'is_pass': True, 'msg': 'module:Wallet,title:wallet info,assert_type:code,message:success'}
2021-09-21 22:59:08,769 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-09-21 22:59:08,796 api_test.py[line:76]INFO - update `myan_testcases` set response="{'code': 0, 'msg': 'success', 'data': {'create_time': '2021-09-05T19:42:29+08:00', 'max_balance_limit': '4294967295', 'max_withdraw_limit': '4294967295', 'total_balance': '999900', 'useable_balance': '999900', 'wallet_sn': 40}, 'time': 1632236348699}", pass='Pass', msg='module:Wallet,title:wallet info,assert_type:code,message:success', update_time='2021-09-21 22:59:08' where id=2
2021-09-21 22:59:08,802 api_test.py[line:149]INFO - 更新结果 rows=1
2021-09-21 22:59:08,803 api_test.py[line:116]INFO - *****checkFailCase
2021-09-21 22:59:08,829 api_test.py[line:177]INFO - ########rerun fail test cases#######
2021-09-21 22:59:08,830 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-09-21 22:59:08,830 api_test.py[line:190]INFO - *****runCase
2021-09-21 22:59:08,830 api_test.py[line:191]INFO - #####start to run case id: 1
2021-09-21 22:59:08,830 api_test.py[line:254]INFO - case id = 1
req_url =  https://platform.htilarpay.com/myan/api/v1.0/user/login
 method = post
 header = {}
 param ={'account': 'doqwmz09573@chacuo.net', 'password': 'Kv6O4Sv9'}
2021-09-21 22:59:09,760 api_test.py[line:261]INFO - response = ↓
2021-09-21 22:59:09,761 api_test.py[line:262]INFO - {'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': 'cd907a09a5c34ae5ad747ad19236bab7', 'token_expire': '2021-10-21 22:59:09', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236349780}
2021-09-21 22:59:09,761 api_test.py[line:263]INFO - #####end to run case id: 1
2021-09-21 22:59:09,761 api_test.py[line:273]INFO - *****assertResponse
2021-09-21 22:59:09,761 api_test.py[line:285]INFO - 测试用例通过
2021-09-21 22:59:09,761 api_test.py[line:144]INFO - assert_msg:{'is_pass': True, 'msg': 'module:Login,title:app login,assert_type:code,message:success'}
2021-09-21 22:59:09,762 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-09-21 22:59:09,789 api_test.py[line:76]INFO - update `myan_testcases` set response="{'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': 'cd907a09a5c34ae5ad747ad19236bab7', 'token_expire': '2021-10-21 22:59:09', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236349780}", pass='Pass', msg='module:Login,title:app login,assert_type:code,message:success', update_time='2021-09-21 22:59:09' where id=1
2021-09-21 22:59:09,794 api_test.py[line:149]INFO - 更新结果 rows=1
2021-09-21 22:59:09,794 api_test.py[line:190]INFO - *****runCase
2021-09-21 22:59:09,794 api_test.py[line:191]INFO - #####start to run case id: 2
2021-09-21 22:59:09,794 api_test.py[line:224]INFO - 有前置条件
2021-09-21 22:59:09,794 api_test.py[line:40]INFO - *****findCaseById
2021-09-21 22:59:09,822 api_test.py[line:190]INFO - *****runCase
2021-09-21 22:59:09,822 api_test.py[line:191]INFO - #####start to run case id: 1
2021-09-21 22:59:09,822 api_test.py[line:254]INFO - case id = 1
req_url =  https://platform.htilarpay.com/myan/api/v1.0/user/login
 method = post
 header = {}
 param ={'account': 'doqwmz09573@chacuo.net', 'password': 'Kv6O4Sv9'}
2021-09-21 22:59:10,921 api_test.py[line:261]INFO - response = ↓
2021-09-21 22:59:10,921 api_test.py[line:262]INFO - {'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': '502b595409b44f0eb71c7dec5a17e3d0', 'token_expire': '2021-10-21 22:59:10', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236350851}
2021-09-21 22:59:10,921 api_test.py[line:263]INFO - #####end to run case id: 1
2021-09-21 22:59:10,921 api_test.py[line:273]INFO - *****assertResponse
2021-09-21 22:59:10,922 api_test.py[line:285]INFO - 测试用例通过
2021-09-21 22:59:10,922 api_test.py[line:234]INFO - 前置条件通过
2021-09-21 22:59:10,922 api_test.py[line:243]INFO - {'field': 'token', 'scope': 'header'}
2021-09-21 22:59:10,922 api_test.py[line:251]INFO - field_value:502b595409b44f0eb71c7dec5a17e3d0
2021-09-21 22:59:10,923 api_test.py[line:254]INFO - case id = 2
req_url =  https://platform.htilarpay.com/myan/api/v1.0/wallet/info
 method = get
 header = {'token': '502b595409b44f0eb71c7dec5a17e3d0'}
 param ={}
2021-09-21 22:59:12,148 api_test.py[line:261]INFO - response = ↓
2021-09-21 22:59:12,149 api_test.py[line:262]INFO - {'code': 0, 'msg': 'success', 'data': {'create_time': '2021-09-05T19:42:29+08:00', 'max_balance_limit': '4294967295', 'max_withdraw_limit': '4294967295', 'total_balance': '999900', 'useable_balance': '999900', 'wallet_sn': 40}, 'time': 1632236351805}
2021-09-21 22:59:12,149 api_test.py[line:263]INFO - #####end to run case id: 2
2021-09-21 22:59:12,149 api_test.py[line:273]INFO - *****assertResponse
2021-09-21 22:59:12,149 api_test.py[line:285]INFO - 测试用例通过
2021-09-21 22:59:12,150 api_test.py[line:144]INFO - assert_msg:{'is_pass': True, 'msg': 'module:Wallet,title:wallet info,assert_type:code,message:success'}
2021-09-21 22:59:12,150 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-09-21 22:59:12,178 api_test.py[line:76]INFO - update `myan_testcases` set response="{'code': 0, 'msg': 'success', 'data': {'create_time': '2021-09-05T19:42:29+08:00', 'max_balance_limit': '4294967295', 'max_withdraw_limit': '4294967295', 'total_balance': '999900', 'useable_balance': '999900', 'wallet_sn': 40}, 'time': 1632236351805}", pass='Pass', msg='module:Wallet,title:wallet info,assert_type:code,message:success', update_time='2021-09-21 22:59:12' where id=2
2021-09-21 22:59:12,187 api_test.py[line:149]INFO - 更新结果 rows=1
2021-09-21 22:59:12,188 api_test.py[line:369]INFO - *****sendTestReport
2021-09-21 22:59:12,258 api_test.py[line:318]INFO - *****loadHtmlPre
2021-09-21 22:59:12,263 api_test.py[line:340]INFO - *****getResultData
2021-09-21 22:59:12,263 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-09-21 22:59:12,287 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `myan_testcases` where project='myan' and run='yes'
2021-09-21 22:59:12,289 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'myan', 'module': 'Login', 'title': 'app login', 'method': 'post', 'url': '/myan/api/v1.0/user/login', 'run': 'yes', 'headers': '{}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"account":"doqwmz09573@chacuo.net","password":"Kv6O4Sv9"}', 'expect_result': '0', 'assert_type': 'code', 'pass': 'Pass', 'msg': 'module:Login,title:app login,assert_type:code,message:success', 'update_time': '2021-09-21 22:59:09', 'response': "{'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': 'cd907a09a5c34ae5ad747ad19236bab7', 'token_expire': '2021-10-21 22:59:09', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236349780}", 'qa': 'Doris'}, {'id': 2, 'project': 'myan', 'module': 'Wallet', 'title': 'wallet info', 'method': 'get', 'url': '/myan/api/v1.0/wallet/info', 'run': 'yes', 'headers': '{"token":"$token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"token","scope":"header"}]', 'request_body': '{}', 'expect_result': '0', 'assert_type': 'code', 'pass': 'Pass', 'msg': 'module:Wallet,title:wallet info,assert_type:code,message:success', 'update_time': '2021-09-21 22:59:12', 'response': "{'code': 0, 'msg': 'success', 'data': {'create_time': '2021-09-05T19:42:29+08:00', 'max_balance_limit': '4294967295', 'max_withdraw_limit': '4294967295', 'total_balance': '999900', 'useable_balance': '999900', 'wallet_sn': 40}, 'time': 1632236351805}", 'qa': 'Doris'}]
2021-09-21 22:59:12,290 api_test.py[line:99]INFO - *****caseRunSummary
2021-09-21 22:59:12,321 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-09-21 22:59:12,350 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `myan_testcases` where project='myan' and run='yes'
2021-09-21 22:59:12,352 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'myan', 'module': 'Login', 'title': 'app login', 'method': 'post', 'url': '/myan/api/v1.0/user/login', 'run': 'yes', 'headers': '{}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"account":"doqwmz09573@chacuo.net","password":"Kv6O4Sv9"}', 'expect_result': '0', 'assert_type': 'code', 'pass': 'Pass', 'msg': 'module:Login,title:app login,assert_type:code,message:success', 'update_time': '2021-09-21 22:59:09', 'response': "{'code': 0, 'msg': 'success', 'data': {'email': 'doqwmz09573@chacuo.net', 'full_name': 'auotokskskskk', 'gender': 2, 'mobile': '93939493903', 'token': 'cd907a09a5c34ae5ad747ad19236bab7', 'token_expire': '2021-10-21 22:59:09', 'user_id': '8132826ac2014136aae815e1b212b45d', 'username': 'doqwmz09573@chacuo.net'}, 'time': 1632236349780}", 'qa': 'Doris'}, {'id': 2, 'project': 'myan', 'module': 'Wallet', 'title': 'wallet info', 'method': 'get', 'url': '/myan/api/v1.0/wallet/info', 'run': 'yes', 'headers': '{"token":"$token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"token","scope":"header"}]', 'request_body': '{}', 'expect_result': '0', 'assert_type': 'code', 'pass': 'Pass', 'msg': 'module:Wallet,title:wallet info,assert_type:code,message:success', 'update_time': '2021-09-21 22:59:12', 'response': "{'code': 0, 'msg': 'success', 'data': {'create_time': '2021-09-05T19:42:29+08:00', 'max_balance_limit': '4294967295', 'max_withdraw_limit': '4294967295', 'total_balance': '999900', 'useable_balance': '999900', 'wallet_sn': 40}, 'time': 1632236351805}", 'qa': 'Doris'}]
2021-09-21 22:59:12,353 api_test.py[line:328]INFO - *****loadHtmlEnd
2021-09-21 22:59:12,359 send_mail.py[line:16]INFO - title = myan API automation test report report = ../report/myan/test_report_2021-09-21_22_59_12.html mail_host = smtp.qq.com mail_sender = brsbyjw@qq.com mail_receivers = ['1226682240@qq.com'] mail_password = luesrdnzkwxrbdbh
2021-09-21 22:59:13,761 send_mail.py[line:45]INFO - email was sent successfully!
2021-09-21 22:59:13,818 api_test.py[line:181]INFO - ########complete to run API automation#######
